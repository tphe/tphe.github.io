<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> rect {fill: lightblue; stroke: black; }</style>
<body onload='init()'>
<svg width=300 height=300>
</svg>
<script>
var dataout;
async function init() {
var data = await d3.csv("/summarydata.csv").then(function(data) {
  data.forEach(function(d) {
    d.Deaths = +d.Deaths;
    d.Population = +d.Population;
    d.Rate  = +d.Rate;
  });
  console.log(data[0]);
  dataout = data;
});
console.log(dataout[1]); 
var data12 = [4,8,15,16,23,42];
  
x=d3.scaleBand().domain(["Accident", "Homicide", "Suicide", "Unknown"]).range([0,200]);
xdomain = [0,5];
xrange = [0,200];
ydomain = [0,7];
yrange = [200,0];

ys = d3.scaleLinear().domain(ydomain).range(yrange);

fdata = dataout.filter(function(d) { return d.Gender == "Not Selected" && d.Race == "Not Selected" && d.Age == "Not Selected" && d.Intent != "Not Selected";});

d3.select('svg')
.attr("width", 200 + 2*50).attr("height", 200 + 2* 50).append("g").attr("transform", "translate("+50+","+50+")")
  .selectAll('rect')
  .data(data).enter().append('rect')
    .attr('x',function(d,i){return x(d.Intent);})
    .attr('y',function(d,i) {return ys(d.Rate);})
    .attr('width', 100/3)
    .attr('height',function(d,i) {return 200-ys(d.Rate);});





d3.select("svg").append("g").attr("transform","translate("+50+","+50+")").call(d3.axisLeft(y));
d3.select("svg").append("g").attr("transform","translate("+50+","+250+")").call(d3.axisBottom(x));
}
  </script>
</body>
</html>
